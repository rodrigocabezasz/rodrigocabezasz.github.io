<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Rodrigo Cabezas Zúñiga" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="fastapi, datos-maestros, crud, arquitectura, framework-de-gestion, " />

<meta property="og:title" content="Framework de Gestión (Parte 5), Gestionando el Corazón del Negocio - Los Datos Maestros "/>
<meta property="og:url" content="../blog/framework-gestion-parte-5-gestionando-datos-maestros.html" />
<meta property="og:description" content="Expandiendo el framework con módulos CRUD para las entidades clave de la empresa: desde el plan de cuentas hasta los clientes. Con un sistema de autenticación funcional, nuestro framework ya es seguro. Pero para ser verdaderamente útil, necesita gestionar la información fundamental que impulsa a cualquier negocio: los Datos Maestros. En esta fase del proyecto, he construido los cimientos para …" />
<meta property="og:site_name" content="Portafolio de Rodrigo Cabezas Zúñiga" />
<meta property="og:article:author" content="Rodrigo Cabezas Zúñiga" />
<meta property="og:article:published_time" content="2024-08-22T20:00:00-04:00" />
<meta name="twitter:title" content="Framework de Gestión (Parte 5), Gestionando el Corazón del Negocio - Los Datos Maestros ">
<meta name="twitter:description" content="Expandiendo el framework con módulos CRUD para las entidades clave de la empresa: desde el plan de cuentas hasta los clientes. Con un sistema de autenticación funcional, nuestro framework ya es seguro. Pero para ser verdaderamente útil, necesita gestionar la información fundamental que impulsa a cualquier negocio: los Datos Maestros. En esta fase del proyecto, he construido los cimientos para …">

        <title>Framework de Gestión (Parte 5), Gestionando el Corazón del Negocio - Los Datos Maestros  · Portafolio de Rodrigo Cabezas Zúñiga
</title>



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="../"><span class=site-name>Portafolio de Rodrigo Cabezas Zúñiga</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       ..
                                    >Home</a>
                                </li>
                                <li ><a href="../pages/contacto.html">Contacto</a></li>
                                <li ><a href="../pages/cv.html">Mi CV</a></li>
                                <li ><a href="../categories.html">Categories</a></li>
                                <li ><a href="../tags.html">Tags</a></li>
                                <li ><a href="../archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="../blog/framework-gestion-parte-5-gestionando-datos-maestros.html">
                Framework de Gestión (Parte 5), Gestionando el Corazón del Negocio - Los Datos Maestros
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p><img alt="Datos Maestros" src="../images/framework-data.jpg"></p>
<p>Expandiendo el framework con módulos CRUD para las entidades clave de la empresa: desde el plan de cuentas hasta los clientes.</p>
<p>Con un sistema de autenticación funcional, nuestro framework ya es seguro. Pero para ser verdaderamente útil, necesita gestionar la información fundamental que impulsa a cualquier negocio: los <strong>Datos Maestros</strong>. En esta fase del proyecto, he construido los cimientos para que la aplicación pueda manejar las entidades críticas de una empresa.</p>
<p>El objetivo era crear un sistema modular y escalable. En lugar de una solución monolítica, desarrollé un módulo independiente para cada tipo de dato maestro. Cada módulo es un microcosmos de nuestra arquitectura, con su propio modelo de base de datos, esquema de API y endpoints en el backend, así como su propia página de gestión en el frontend.</p>
<h3>La Anatomía de un Módulo de Datos Maestros</h3>
<p>Para cada entidad de negocio, el proceso de implementación siguió un patrón consistente:</p>
<ol>
<li>
<p><strong>Modelo de Datos (<code>models/</code>):</strong> Se define la estructura de la tabla en MySQL usando SQLAlchemy. Por ejemplo, para las sucursales:</p>
<p>```python</p>
<h1>backend/app/models/sucursal.py</h1>
<p>class Sucursal(Base):
    <strong>tablename</strong> = "sucursales"
    id = Column(Integer, primary_key=True, index=True)
    codigo = Column(String(20), unique=True, nullable=False)
    nombre = Column(String(100), nullable=False)
    activo = Column(Boolean, default=True)
    # ... otros campos
```</p>
</li>
<li>
<p><strong>Esquemas de API (<code>schemas/</code>):</strong> Se crean los modelos Pydantic para la validación de datos en las peticiones (<code>SucursalCreate</code>, <code>SucursalUpdate</code>) y respuestas (<code>SucursalRead</code>).</p>
</li>
<li>
<p><strong>Endpoints CRUD (<code>api/</code>):</strong> Se desarrolla un router en FastAPI con los endpoints <code>POST</code>, <code>GET</code>, <code>PUT</code> y <code>DELETE</code> para esa entidad, asegurando una gestión completa.</p>
<p>```python</p>
<h1>backend/app/api/plan_cuentas.py (Ejemplo de endpoint POST)</h1>
<p>@router.post("/plan_cuentas", response_model=CuentaContableRead)
def crear_cuenta(cuenta: CuentaContableCreate, db: Session = Depends(get_db)):
    db_cuenta = db.query(CuentaContable).filter(CuentaContable.codigo == cuenta.codigo).first()
    if db_cuenta:
        raise HTTPException(status_code=400, detail="El código de cuenta ya existe")</p>
<div class="highlight"><pre><span></span><code>nueva_cuenta = CuentaContable(**cuenta.dict())
db.add(nueva_cuenta)
db.commit()
db.refresh(nueva_cuenta)
return nueva_cuenta
</code></pre></div>

<p>```</p>
</li>
<li>
<p><strong>Interfaz de Usuario (<code>pages/</code>):</strong> Se construye una página en Streamlit con un formulario para crear/editar registros y una tabla para listar los datos existentes, consumiendo los endpoints de la API.</p>
<p>```python</p>
<h1>frontend/app/pages/gestion_clientes.py (Ejemplo de formulario Streamlit)</h1>
<p>with st.form("form_cliente"):
    nombre = st.text_input("Nombre")
    rut = st.text_input("RUT/ID")
    tipo = st.selectbox("Tipo", ["Cliente", "Proveedor"])
    # ... otros campos
    submit = st.form_submit_button("Guardar")</p>
<p>if submit:
    # Lógica para enviar los datos al endpoint POST de /clientes
    ...
```</p>
</li>
</ol>
<h3>Módulos Implementados</h3>
<p>Siguiendo este patrón, he implementado la gestión completa para las siguientes entidades, que son la base de cualquier sistema de control de gestión:</p>
<ul>
<li><strong>Sucursales y Centros de Costo</strong></li>
<li><strong>Plan de Cuentas Contables</strong></li>
<li><strong>Productos y Servicios</strong></li>
<li><strong>Clientes y Proveedores</strong></li>
<li><strong>Unidades de Negocio y Áreas</strong></li>
<li><strong>Períodos Contables</strong></li>
</ul>
<h3>Próximos Pasos: ¡A Visualizar!</h3>
<p>Con los datos maestros ya gestionables a través de la interfaz, el framework ha alcanzado una madurez funcional. Hemos sentado las bases para la carga de datos transaccionales y, lo más importante, para la creación de los dashboards.</p>
<p>En el próximo post, nos sumergiremos en la <strong>Fase 5: Dashboards y Visualización</strong>. Empezaremos a consumir todos estos datos para construir las visualizaciones que darán sentido al negocio y mostrarán el verdadero poder de nuestra plantilla.</p>
<p>Puedes seguir el progreso y ver el código completo en el repositorio del proyecto. <em>(Aquí pondremos el enlace a GitHub cuando esté listo)</em>.</p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2024-08-22T20:00:00-04:00">jue. 22 agosto 2024</time>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#framework-de-gestion-ref">framework-de-gestion</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#arquitectura-ref">arquitectura
                    <span class="superscript">2</span>
</a></li>
                <li><a href="../tags.html#crud-ref">crud
                    <span class="superscript">2</span>
</a></li>
                <li><a href="../tags.html#datos-maestros-ref">datos-maestros
                    <span class="superscript">1</span>
</a></li>
                <li><a href="../tags.html#fastapi-ref">fastapi
                    <span class="superscript">5</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>

    <div>
        <span class="site-name">Portafolio de Rodrigo Cabezas Zúñiga</span> - Ingeniero en Control de Gestión & Data Scientist
    </div>



    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="../theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>